# =========================
# KNOWLEDGE PACK
# =========================

import re

# -------------------------
# Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜ PYTHON (Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾)
# -------------------------

FUNCTIONS = {
    "print": {
        "desc": "Ð’Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð° ÑÐºÑ€Ð°Ð½.",
        "examples": [
            ("print(3)", "3"),
            ("print('Ñ‹Ñ‹Ñ‹')", "Ñ‹Ñ‹Ñ‹"),
            ("print(2+2)", "4")
        ]
    },
    "input": {
        "desc": "ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð²Ð²Ð¾Ð´ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ (ÑÑ‚Ñ€Ð¾ÐºÑƒ).",
        "examples": [
            ("x = input()", "Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð²Ð²Ð¾Ð´"),
            ("print(input())", "Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð²Ð²ÐµÐ´Ñ‘Ð½Ð½Ð¾Ðµ")
        ]
    },
    "len": {
        "desc": "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð´Ð»Ð¸Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÐ¸, ÑÐ¿Ð¸ÑÐºÐ° Ð¸ Ñ‚.Ð¿.",
        "examples": [
            ("len('abc')", "3"),
            ("len([1,2,3])", "3")
        ]
    },
    "int": {
        "desc": "ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÑ‚ Ð² Ñ†ÐµÐ»Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.",
        "examples": [
            ("int('5')", "5"),
            ("int(3.7)", "3")
        ]
    },
    "range": {
        "desc": "Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ñ‚ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ñ‡Ð¸ÑÐµÐ».",
        "examples": [
            ("list(range(3))", "[0,1,2]"),
            ("for i in range(2,5): print(i)", "2 3 4")
        ]
    },
    "sum": {
        "desc": "Ð¡ÑƒÐ¼Ð¼Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹.",
        "examples": [
            ("sum([1,2,3])", "6")
        ]
    },
    "max": {
        "desc": "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚.",
        "examples": [
            ("max(3,7)", "7"),
            ("max([1,9,2])", "9")
        ]
    },
    "min": {
        "desc": "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚.",
        "examples": [
            ("min(3,7)", "3"),
            ("min([1,9,2])", "1")
        ]
    },
    "abs": {
        "desc": "ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ñ‡Ð¸ÑÐ»Ð°.",
        "examples": [
            ("abs(-5)", "5")
        ]
    },
}

# -------------------------
# ÐžÐ¨Ð˜Ð‘ÐšÐ˜ PYTHON (Ñ‡Ð°ÑÑ‚Ñ‹Ðµ)
# -------------------------

ERRORS = {
    "syntaxerror": {
        "desc": "ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ°: Python Ð½Ðµ Ð¿Ð¾Ð½ÑÐ» ÐºÐ¾Ð´.",
        "fix": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐºÐ¾Ð±ÐºÐ¸, Ð´Ð²Ð¾ÐµÑ‚Ð¾Ñ‡Ð¸Ñ, Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ñ‹."
    },
    "nameerror": {
        "desc": "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð½Ðµ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð°.",
        "fix": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ð¿ÐµÑ€ÐµÐ´ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼."
    },
    "typeerror": {
        "desc": "ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ….",
        "fix": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ int/str Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ Ð½Ð¸Ð¼Ð¸."
    },
    "valueerror": {
        "desc": "ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ.",
        "fix": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ð¼Ð¾Ð¶Ð½Ð¾ Ð»Ð¸ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ."
    },
    "indexerror": {
        "desc": "Ð’Ñ‹Ñ…Ð¾Ð´ Ð·Ð° Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ ÑÐ¿Ð¸ÑÐºÐ°.",
        "fix": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¸Ð½Ð´ÐµÐºÑÑ‹."
    },
    "zerodivisionerror": {
        "desc": "Ð”ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð° Ð½Ð¾Ð»ÑŒ.",
        "fix": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ."
    }
}

# -------------------------
# Ð§ÐÐ¡Ð¢Ð«Ð• Ð—ÐÐ”ÐÐ§Ð˜ (ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹)
# -------------------------

TASKS = [
    {
        "keys": ["Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸", "3"],
        "code": "print(3)"
    },
    {
        "keys": ["a", "b", "Ð±Ð¾Ð»ÑŒÑˆÐµ"],
        "code": (
            "a = int(input())\n"
            "b = int(input())\n"
            "if a > b:\n"
            "    print(a)\n"
            "elif b > a:\n"
            "    print(b)\n"
            "else:\n"
            "    print('=')"
        )
    },
    {
        "keys": ["Ñ†Ð¸ÐºÐ»", "for"],
        "code": "for i in range(5):\n    print(i)"
    },
    {
        "keys": ["while"],
        "code": "i = 0\nwhile i < 5:\n    print(i)\n    i += 1"
    },
    {
        "keys": ["ÑÑƒÐ¼Ð¼"],
        "code": "a = int(input())\nb = int(input())\nprint(a + b)"
    }
]

# -------------------------
# ÐŸÐžÐ˜Ð¡Ðš Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜
# -------------------------

def explain_function(name):
    name = name.lower()
    if name not in FUNCTIONS:
        return None

    f = FUNCTIONS[name]
    text = f"\nðŸ”¹ {name}()\n{f['desc']}\n\nÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹:\n"
    for code, out in f["examples"]:
        text += f"{code} â†’ {out}\n"
    return text

# -------------------------
# ÐŸÐžÐ˜Ð¡Ðš ÐžÐ¨Ð˜Ð‘ÐšÐ˜
# -------------------------

def explain_error(text):
    t = text.lower()
    for k, v in ERRORS.items():
        if k in t:
            return (
                f"âŒ {k}\n"
                f"{v['desc']}\n"
                f"ÐšÐ°Ðº Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ: {v['fix']}"
            )
    return None

# -------------------------
# Ð‘Ð«Ð¡Ð¢Ð ÐžÐ• Ð Ð•Ð¨Ð•ÐÐ˜Ð•
# -------------------------

def fast_solve(text):
    t = text.lower()
    for task in TASKS:
        if all(k in t for k in task["keys"]):
            return task["code"]
    return None
