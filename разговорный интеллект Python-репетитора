# =========================
# DIALOG AI ‚Äî –ñ–ò–í–û–ô –ë–û–¢
# =========================

import random
from history import add_history, show_history
from errors_ai import error_dialog
from solver_ai import solver_dialog

# -------------------------
# –†–ï–ê–ö–¶–ò–ò –ù–ê –°–õ–û–í–ê
# -------------------------

THANKS_WORDS = [
    "—Å–ø–∞—Å–∏–±–æ", "—Å–ø—Å", "–±–ª–∞–≥–æ–¥–∞—Ä—é", "thanks", "—Å–µ–Ω–∫—Å"
]

POSITIVE_ANSWERS = [
    "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ üôÇ –†–∞–¥ —Å—Ç–∞—Ä–∞—Ç—å—Å—è!",
    "–û—á–µ–Ω—å —Ä–∞–¥, —á—Ç–æ –ø—Ä–∏–≥–æ–¥–∏–ª–æ—Å—å üíô",
    "–û–±—Ä–∞—â–∞–π—Å—è, –µ—Å–ª–∏ —á—Ç–æ!",
    "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ üòé",
    "–ú–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ —ç—Ç–æ —Å–ª—ã—à–∞—Ç—å!"
]

PRAISE_WORDS = [
    "–∫—Ä—É—Ç–æ", "—Ç—ã –ª—É—á—à–∏–π", "–æ—Ñ–∏–≥–µ–Ω–Ω–æ", "–∫–ª–∞—Å—Å", "–∏–º–±–∞"
]

PRAISE_ANSWERS = [
    "üò≥ –û–≥–æ, —Å–ø–∞—Å–∏–±–æ!",
    "–ú–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ, –ø—Ä–∞–≤–¥–∞ üôÇ",
    "–°—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º!",
    "–†–∞–¥, —á—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è üî•"
]

# -------------------------
# –ù–û–†–ú–ê–õ–ò–ó–ê–¶–ò–Ø –¢–ï–ö–°–¢–ê
# -------------------------

def normalize(text):
    text = text.lower()
    replaces = {
        "–∫–∞–¥": "–∫–æ–¥",
        "—Ñ—É–Ω–∫—Ü—ã—é": "—Ñ—É–Ω–∫—Ü–∏—é",
        "—Ñ—É–Ω—Ü–∏—é": "—Ñ—É–Ω–∫—Ü–∏—é",
        "–≤—ã–≤–∏—Å—Ç–∏": "–≤—ã–≤–µ—Å—Ç–∏",
        "–ø–∏—Ç–æ–Ω": "python",
        "–ø–∞–π—Ç–æ–Ω": "python",
        "–æ—à—ã–±–∫–∞": "–æ—à–∏–±–∫–∞",
        "–æ–±—è—Å–Ω–∏": "–æ–±—ä—è—Å–Ω–∏",
        "–æ–±—å—è—Å–Ω–∏": "–æ–±—ä—è—Å–Ω–∏",
        "–≥–µ–Ω–∏—Ä–∏—Ä—É–π": "–≥–µ–Ω–µ—Ä–∏—Ä—É–π"
    }
    for k, v in replaces.items():
        text = text.replace(k, v)
    return text

# -------------------------
# –û–ë–£–ß–ï–ù–ò–ï PYCHARM
# -------------------------

def teach_pycharm():
    print("""
üìò –û–ë–£–ß–ï–ù–ò–ï PYCHARM

1Ô∏è‚É£ –°–∫–∞—á–∞–π PyCharm —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏ Python (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
3Ô∏è‚É£ –û—Ç–∫—Ä–æ–π PyCharm ‚Üí New Project
4Ô∏è‚É£ –í—ã–±–µ—Ä–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python
5Ô∏è‚É£ –°–æ–∑–¥–∞–π —Ñ–∞–π–ª .py
6Ô∏è‚É£ –ü–∏—à–∏ –∫–æ–¥ –∏ –∑–∞–ø—É—Å–∫–∞–π ‚ñ∂

üí° –°–æ–≤–µ—Ç:
–ù–∞—á–Ω–∏ —Å:
print("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä")
""")

# -------------------------
# –£–°–¢–ê–ù–û–í–ö–ê PYTHON
# -------------------------

def teach_install_python():
    print("""
üêç –ö–ê–ö –£–°–¢–ê–ù–û–í–ò–¢–¨ PYTHON

1Ô∏è‚É£ –ó–∞–π–¥–∏ –Ω–∞ python.org
2Ô∏è‚É£ –°–∫–∞—á–∞–π –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
3Ô∏è‚É£ –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ—Å—Ç–∞–≤—å –≥–∞–ª–æ—á–∫—É:
   ‚úî Add Python to PATH
4Ô∏è‚É£ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–æ–≤–µ—Ä—å:
python --version
""")

# -------------------------
# –ü–û–ú–û–©–¨ –ü–û –§–£–ù–ö–¶–ò–Ø–ú
# -------------------------

def explain_print():
    print("""
üîπ print()

–§—É–Ω–∫—Ü–∏—è print –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —ç–∫—Ä–∞–Ω.

–ü—Ä–∏–º–µ—Ä—ã:
print(3)        ‚Üí 3
print("—ã—ã—ã")    ‚Üí —ã—ã—ã
print(2 + 2)    ‚Üí 4
""")

def explain_input():
    print("""
üîπ input()

–§—É–Ω–∫—Ü–∏—è input –ø–æ–ª—É—á–∞–µ—Ç –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü—Ä–∏–º–µ—Ä:
name = input()
print(name)
""")

# -------------------------
# –ì–õ–ê–í–ù–´–ô –î–ò–ê–õ–û–ì
# -------------------------

def dialog_loop():
    print('üêç –ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç Python –†–µ–ø–µ—Ç–∏—Ç–æ—Ä –ò–ò Mega')
    print('–Ø –º–æ–≥—É:')
    print('- –æ–±—ä—è—Å–Ω—è—Ç—å Python')
    print('- —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏')
    print('- –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥')
    print('- –æ–±—ä—è—Å–Ω—è—Ç—å –æ—à–∏–±–∫–∏')
    print('- –æ–±—É—á–∞—Ç—å PyCharm')
    print('- –ø–æ–º–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤')
    print('\n–ù–∞–ø–∏—à–∏, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å üëá')

    while True:
        user = input("\n>> ")

        if not user.strip():
            continue

        text = normalize(user)
        add_history(user)

        if text in ["–≤—ã—Ö–æ–¥", "exit", "quit"]:
            print("üëã –£–¥–∞—á–∏ –≤ –∏–∑—É—á–µ–Ω–∏–∏ Python!")
            break

        if any(w in text for w in THANKS_WORDS):
            print(random.choice(POSITIVE_ANSWERS))
            continue

        if any(w in text for w in PRAISE_WORDS):
            print(random.choice(PRAISE_ANSWERS))
            continue

        if "–æ—à–∏–±–∫–∞" in text:
            error_dialog()
            continue

        if "–∏—Å—Ç–æ—Ä–∏—è" in text:
            show_history()
            continue

        if "–±—ã—Å—Ç—Ä–æ" in text or "—Ä–µ—à–∏" in text or "–∑–∞–¥–∞—á" in text:
            solver_dialog()
            continue

        if "pycharm" in text:
            teach_pycharm()
            continue

        if "—É—Å—Ç–∞–Ω–æ–≤" in text and "python" in text:
            teach_install_python()
            continue

        if "print" in text:
            explain_print()
            continue

        if "input" in text:
            explain_input()
            continue

        if "–≥–µ–Ω–µ—Ä–∏—Ä—É–π" in text or "–∫–æ–¥" in text:
            solver_dialog()
            continue

        print("ü§î –Ø –ø–æ–Ω—è–ª –Ω–µ –≤—Å—ë.")
        print("–ü–æ–ø—Ä–æ–±—É–π —Å–∫–∞–∑–∞—Ç—å –∏–Ω–∞—á–µ –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ.")
